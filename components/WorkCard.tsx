'use client';

import Image from 'next/image';
import React, { useState } from 'react';
import { useSpring, animated } from 'react-spring';
import PageOutTransition from './PageOutTransition';

const WorkCard = ({ id, title, description, imgSrc, link }: any) => {
	const [active, setActive] = useState(false);

	const { x } = useSpring({
		config: { tension: 170, friction: 26, duration: 300 },
		x: active ? 1 : 0,
	});

	const roundedSq =
		'M0.0881233 105.314C0.0881233 105.314 0.0880127 128.875 0.0880127 157.939C0.0880127 187.003 0.0881233 210.564 0.0881233 210.564C0.0881233 210.564 0.0880127 234.125 0.0880127 263.189C0.0880127 292.253 0.0881233 315.814 0.0881233 315.814C0.0881233 315.814 0.0880127 339.375 0.0880127 368.439C0.0880127 397.503 23.649 421.064 52.713 421.064C81.365 421.064 105.324 421.064 105.324 421.064C105.324 421.064 129.311 421.064 157.963 421.064C186.615 421.064 210.574 421.064 210.574 421.064C210.574 421.064 234.561 421.064 263.213 421.064C291.865 421.064 315.824 421.064 315.824 421.064C315.824 421.064 339.811 421.064 368.463 421.064C397.527 421.064 421.088 397.503 421.088 368.439C421.088 339.678 421.088 315.822 421.088 315.822C421.088 315.822 421.088 291.951 421.088 263.189C421.088 234.428 421.088 210.572 421.088 210.572C421.088 210.572 421.088 186.701 421.088 157.939C421.088 129.178 421.088 105.306 421.088 105.306C421.088 105.306 421.088 81.4509 421.088 52.6893C421.088 23.6252 397.527 0.0641985 368.463 0.0641985C339.399 0.0641985 315.838 0.0634766 315.838 0.0634766C315.838 0.0634766 292.277 0.0641985 263.213 0.0641985C234.149 0.0641985 210.588 0.064682 210.588 0.064682C210.588 0.064682 187.027 0.0641985 157.963 0.0641985C128.899 0.0641985 105.338 0.0641985 105.338 0.0641985C105.338 0.0641985 81.777 0.0641985 52.713 0.0641985C23.649 0.0641985 0.0880127 23.6252 0.0880127 52.6893C0.0880127 81.7532 0.0881233 105.314 0.0881233 105.314Z';

	const scallopedSq =
		'M53.1721 105.314C24.1081 105.314 0.547119 128.875 0.547119 157.939C0.547119 187.003 24.1081 210.564 53.1721 210.564C24.1081 210.564 0.547119 234.125 0.547119 263.189C0.547119 292.253 24.1081 315.814 53.1721 315.814C24.1081 315.814 0.547119 339.375 0.547119 368.439C0.547119 397.503 24.1081 421.064 53.1721 421.064C81.8241 421.064 105.128 398.166 105.783 369.672C106.438 398.166 129.77 421.064 158.422 421.064C187.074 421.064 210.378 398.166 211.033 369.672C211.688 398.166 235.02 421.064 263.672 421.064C292.324 421.064 315.628 398.166 316.283 369.672C316.938 398.166 340.27 421.064 368.922 421.064C397.986 421.064 421.547 397.503 421.547 368.439C421.547 339.677 398.474 316.305 369.827 315.822C398.474 315.339 421.547 291.951 421.547 263.189C421.547 234.427 398.474 211.055 369.827 210.572C398.474 210.089 421.547 186.701 421.547 157.939C421.547 129.177 398.474 105.789 369.827 105.306C398.474 104.823 421.547 81.4506 421.547 52.6891C421.547 23.6249 397.986 0.0639648 368.922 0.0639648C339.858 0.0639648 316.297 23.6249 316.297 52.6891C316.297 23.6249 292.736 0.0639648 263.672 0.0639648C234.608 0.0639648 211.047 23.6249 211.047 52.6891C211.047 23.6249 187.486 0.0639648 158.422 0.0639648C129.358 0.0639648 105.797 23.6249 105.797 52.6891C105.797 23.6249 82.2361 0.0639648 53.1721 0.0639648C24.1081 0.0639648 0.547119 23.6249 0.547119 52.6891C0.547119 81.753 24.1081 105.314 53.1721 105.314Z';

	return (
		<>
			<div
				id={`tb-${id}`}
				className="w-100 sm:w-1/2 md:w-1/3 p-4 cursor-pointer relative"
				onMouseEnter={() => setActive(true)}
				onMouseLeave={() => setActive(false)}>
				<PageOutTransition link={link}>
					<svg
						width="0"
						height="0"
						viewBox="0 0 422 422"
						fill="none"
						preserveAspectRatio="true"
						xmlns="http://www.w3.org/2000/svg">
						<clipPath id={`clip-${id}`} clipPathUnits="objectBoundingBox">
							<animated.path
								transform="scale(0.00236966824, 0.00236966824)"
								fillRule="evenodd"
								clipRule="evenodd"
								d={x.to({
									range: [0, 1],
									output: [roundedSq, scallopedSq],
								})}
							/>
						</clipPath>
					</svg>
					<Image
						style={{ clipPath: `url(#clip-${id})` }}
						src={imgSrc}
						alt=""
						className="bg-gray-200 rounded h-72 workCardImg"
					/>
					<p className="text-xl mt-4 mb-1">{title}</p>
					<p className="text-gray-500 dark:text-gray-300">{description}</p>
				</PageOutTransition>
			</div>
		</>
	);
};

export default WorkCard;
